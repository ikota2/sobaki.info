{"ast":null,"code":"import { isEmptyData } from '.';\nimport { NewStatuses } from '../types';\nconst {\n  loading,\n  loaded,\n  emptyData,\n  error\n} = NewStatuses;\nexport const request = async ({\n  setStatus,\n  callback,\n  setData\n  // setSubmitting,\n}) => {\n  setStatus(loading);\n  try {\n    const data = await callback();\n    if (isEmptyData(data)) {\n      setStatus(emptyData);\n    } else {\n      if (setData) setData(data);\n      setStatus(loaded);\n    }\n  } catch (err) {\n    setStatus(error);\n    console.log(err);\n  }\n};","map":{"version":3,"names":["isEmptyData","NewStatuses","loading","loaded","emptyData","error","request","setStatus","callback","setData","data","err","console","log"],"sources":["/Users/alligator/Documents/education/projects/2022/sobaki/client/src/helpers/request.ts"],"sourcesContent":["import {isEmptyData} from '.';\nimport { NewStatus, NewStatuses } from '../types';\n\ninterface MakeRequestToServer<T> {\n\tsetStatus: (value: NewStatus) => void;\n\tcallback: () => Promise<T>;\n\tsetData?: (value: T) => void;\n\t// setSubmitting?: FormikSetSubmitting;\n}\n\nconst { loading, loaded, emptyData, error } = NewStatuses;\n\nexport const request = async <T>(\n\t{\n\t\tsetStatus,\n\t\tcallback,\n\t\tsetData,\n\t\t// setSubmitting,\n\t}: MakeRequestToServer<T>,\n): Promise<void> => {\n\tsetStatus(loading);\n\ttry {\n\t\tconst data = await callback();\n\t\tif (isEmptyData(data)) {\n\t\t\tsetStatus(emptyData);\n\t\t} else {\n\t\t\tif (setData) setData(data);\n\t\t\tsetStatus(loaded);\n\t\t}\n\t} catch (err) {\n\t\tsetStatus(error);\n\t\tconsole.log(err);\n\t}\n};\n"],"mappings":"AAAA,SAAQA,WAAW,QAAO,GAAG;AAC7B,SAAoBC,WAAW,QAAQ,UAAU;AASjD,MAAM;EAAEC,OAAO;EAAEC,MAAM;EAAEC,SAAS;EAAEC;AAAM,CAAC,GAAGJ,WAAW;AAEzD,OAAO,MAAMK,OAAO,GAAG,MAAAA,CACtB;EACCC,SAAS;EACTC,QAAQ;EACRC;EACA;AACuB,CAAC,KACN;EACnBF,SAAS,CAACL,OAAO,CAAC;EAClB,IAAI;IACH,MAAMQ,IAAI,GAAG,MAAMF,QAAQ,CAAC,CAAC;IAC7B,IAAIR,WAAW,CAACU,IAAI,CAAC,EAAE;MACtBH,SAAS,CAACH,SAAS,CAAC;IACrB,CAAC,MAAM;MACN,IAAIK,OAAO,EAAEA,OAAO,CAACC,IAAI,CAAC;MAC1BH,SAAS,CAACJ,MAAM,CAAC;IAClB;EACD,CAAC,CAAC,OAAOQ,GAAG,EAAE;IACbJ,SAAS,CAACF,KAAK,CAAC;IAChBO,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;EACjB;AACD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}