{"ast":null,"code":"var _jsxFileName = \"/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport axios from 'axios';\nimport RailwayMap from './features/RailwayMap/RailwayMap';\nimport Loader from './components/Loader/Loader';\nimport Footer from './components/Footer/Footer';\nimport { key, today, url } from './constants';\nimport { capitalize, findYaCode } from './helpers';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Title = /*#__PURE__*/React.lazy(_c = () => import('./features/Title/Title'));\n_c2 = Title;\nconst Finder = /*#__PURE__*/React.lazy(_c3 = () => import('./features/Finder/Finder'));\n_c4 = Finder;\nconst Schedule = /*#__PURE__*/React.lazy(_c5 = () => import('./features/Schedule/Schedule'));\n_c6 = Schedule;\nfunction App() {\n  _s();\n  const [params, setParams] = useState({\n    from: '',\n    to: ''\n  });\n  const [allStations, setAllStations] = useState([]);\n  const [schedule, setSchedule] = useState({});\n  const [currentDate, setCurrentDate] = useState(today);\n  const [status, setStatus] = useState('idle');\n  const [showMap, setShowMap] = useState(false);\n  useLayoutEffect(() => {\n    axios.get(`${url}`).then(res => setAllStations(res.data)).catch(e => console.error(e));\n  }, [setAllStations]);\n  useEffect(() => {\n    const {\n      from,\n      to\n    } = params;\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`).then(res => {\n        setStatus('loaded');\n        setSchedule(res.data);\n      }).catch(e => {\n        setStatus('error');\n        console.error(e);\n      });\n    }\n  }, [params, currentDate, allStations]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 27\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Title, {\n        currentDate: currentDate,\n        setCurrentDate: setCurrentDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: () => setShowMap(!showMap),\n      children: \"show map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), !showMap && /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 40\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Finder, {\n        setParams: setParams,\n        allStations: allStations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 20\n    }, this), showMap && /*#__PURE__*/_jsxDEV(RailwayMap, {\n      allStations: allStations\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }, this), status === 'loading' && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 32\n    }, this), status === 'loaded' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 31\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Schedule, {\n          schedule: schedule,\n          currentDate: currentDate,\n          status: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"zcCULQ2oMT+K7cDv7FM3WUyulzI=\");\n_c7 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Title$React.lazy\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"Finder$React.lazy\");\n$RefreshReg$(_c4, \"Finder\");\n$RefreshReg$(_c5, \"Schedule$React.lazy\");\n$RefreshReg$(_c6, \"Schedule\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useLayoutEffect","Suspense","axios","RailwayMap","Loader","Footer","key","today","url","capitalize","findYaCode","jsxDEV","_jsxDEV","Fragment","_Fragment","Title","lazy","_c","_c2","Finder","_c3","_c4","Schedule","_c5","_c6","App","_s","params","setParams","from","to","allStations","setAllStations","schedule","setSchedule","currentDate","setCurrentDate","status","setStatus","showMap","setShowMap","get","then","res","data","catch","e","console","error","undefined","length","fromCode","toCode","className","children","fallback","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","_c7","$RefreshReg$"],"sources":["/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport axios from 'axios';\n\nimport RailwayMap from './features/RailwayMap/RailwayMap';\nimport Loader from './components/Loader/Loader';\nimport Footer from './components/Footer/Footer';\nimport {key, today, url} from './constants';\nimport {capitalize, findYaCode} from './helpers';\nimport {AllStations, Params, Status} from './types';\nimport './App.css';\n\nconst Title = React.lazy(() => import('./features/Title/Title'));\nconst Finder = React.lazy(() => import('./features/Finder/Finder'));\nconst Schedule = React.lazy(() => import('./features/Schedule/Schedule'));\n\nfunction App() {\n  const [params, setParams] = useState<Params>({from: '', to: ''})\n  const [allStations, setAllStations] = useState<AllStations[]>([]);\n  const [schedule, setSchedule] = useState({});\n  const [currentDate, setCurrentDate] = useState<string>(today);\n  const [status, setStatus] = useState<Status>('idle');\n  const [showMap, setShowMap] = useState(false);\n\n  useLayoutEffect(() => {\n    axios.get(`${url}`)\n      .then((res) => setAllStations(res.data))\n      .catch(e => console.error(e))\n  }, [setAllStations]);\n\n  useEffect(() => {\n    const {from, to} = params;\n\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`)\n        .then((res) => {\n          setStatus('loaded');\n          setSchedule(res.data)\n        })\n        .catch((e) => {\n          setStatus('error');\n          console.error(e)\n        })\n    }\n  }, [params, currentDate, allStations])\n\n  return (\n    <div className=\"App\">\n      <Suspense fallback={<Loader />}>\n        <Title currentDate={currentDate} setCurrentDate={setCurrentDate}/>\n      </Suspense>\n      <button type=\"button\" onClick={() => setShowMap(!showMap)}>show map</button>\n      {!showMap && <Suspense fallback={<Loader />}>\n        <Finder\n          setParams={setParams}\n          allStations={allStations}\n        />\n      </Suspense>}\n      {showMap && <RailwayMap allStations={allStations} />}\n      {status === 'loading' && <Loader />}\n      {status === 'loaded' &&\n        <>\n          <Suspense fallback={<Loader />}>\n            <Schedule schedule={schedule} currentDate={currentDate} status={status}/>\n          </Suspense>\n          <Footer />\n        </>\n      }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}