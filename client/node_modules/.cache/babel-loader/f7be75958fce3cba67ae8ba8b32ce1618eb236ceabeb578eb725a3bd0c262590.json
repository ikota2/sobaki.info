{"ast":null,"code":"var _jsxFileName = \"/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport axios from \"axios\";\nimport RailwayMap from \"./features/RailwayMap/RailwayMap\";\nimport Loader from \"./components/Loader/Loader\";\nimport { key } from './constants/key';\nimport { thnxToYandex } from \"./constants/thnxToYandex\";\nimport { today } from \"./constants/dates\";\nimport { capitalize } from \"./helpers/capitalize\";\nimport { findYaCode } from \"./helpers/findYaCode\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Title = /*#__PURE__*/React.lazy(_c = () => import('./features/Title/Title'));\n_c2 = Title;\nconst Finder = /*#__PURE__*/React.lazy(_c3 = () => import('./features/Finder/Finder'));\n_c4 = Finder;\nconst Schedule = /*#__PURE__*/React.lazy(_c5 = () => import('./features/Schedule/Schedule'));\n_c6 = Schedule;\nconst fetchAllStations = async () => {\n  const response = await axios.get(`http://127.0.0.1:3001/`);\n  return response.data;\n};\nfunction App() {\n  _s();\n  const [params, setParams] = useState({\n    from: \"\",\n    to: \"\"\n  });\n  const [allStations, setAllStations] = useState([]);\n  const [schedule, setSchedule] = useState({});\n  const [currentDate, setCurrentDate] = useState(today);\n  const [status, setStatus] = useState('idle');\n  const [showMap, setShowMap] = useState(false);\n  useLayoutEffect(() => {\n    axios.get(`http://127.0.0.1:3001/`).then(res => setAllStations(res.data)).catch(e => console.error(e));\n  }, [setAllStations]);\n  useEffect(() => {\n    const {\n      from,\n      to\n    } = params;\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`).then(res => {\n        setStatus('loaded');\n        setSchedule(res.data);\n      }).catch(e => {\n        setStatus('error');\n        console.error(e);\n      });\n    }\n  }, [params, currentDate, allStations]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 27\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Title, {\n        currentDate: currentDate,\n        setCurrentDate: setCurrentDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: () => setShowMap(!showMap),\n      children: \"show map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), !showMap && /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 40\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Finder, {\n        setParams: setParams,\n        allStations: allStations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 20\n    }, this), showMap && /*#__PURE__*/_jsxDEV(RailwayMap, {\n      allStations: allStations\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }, this), status === 'loading' && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 32\n    }, this), status === 'loaded' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 31\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Schedule, {\n          schedule: schedule,\n          currentDate: currentDate,\n          status: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        style: {\n          position: 'relative',\n          left: 0,\n          bottom: 0,\n          width: '100%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: thnxToYandex\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Ffy+/ES1gXDGxpwjhyoSygWB6tk=\");\n_c7 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Title$React.lazy\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"Finder$React.lazy\");\n$RefreshReg$(_c4, \"Finder\");\n$RefreshReg$(_c5, \"Schedule$React.lazy\");\n$RefreshReg$(_c6, \"Schedule\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useLayoutEffect","Suspense","axios","RailwayMap","Loader","key","thnxToYandex","today","capitalize","findYaCode","jsxDEV","_jsxDEV","Fragment","_Fragment","Title","lazy","_c","_c2","Finder","_c3","_c4","Schedule","_c5","_c6","fetchAllStations","response","get","data","App","_s","params","setParams","from","to","allStations","setAllStations","schedule","setSchedule","currentDate","setCurrentDate","status","setStatus","showMap","setShowMap","then","res","catch","e","console","error","undefined","length","fromCode","toCode","className","children","fallback","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","style","position","left","bottom","width","_c7","$RefreshReg$"],"sources":["/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from 'react-query'\nimport axios from \"axios\";\n\nimport RailwayMap from \"./features/RailwayMap/RailwayMap\";\nimport Loader from \"./components/Loader/Loader\";\nimport {key} from './constants/key';\nimport {thnxToYandex} from \"./constants/thnxToYandex\";\nimport {today} from \"./constants/dates\";\nimport {capitalize} from \"./helpers/capitalize\";\nimport {findYaCode} from \"./helpers/findYaCode\";\nimport {AllStations, Params, Status} from \"./types\";\nimport './App.css';\n\nconst Title = React.lazy(() => import('./features/Title/Title'));\nconst Finder = React.lazy(() => import('./features/Finder/Finder'));\nconst Schedule = React.lazy(() => import('./features/Schedule/Schedule'));\n\nconst fetchAllStations = async () => {\n  const response = await axios.get(`http://127.0.0.1:3001/`);\n  return response.data;\n};\nfunction App() {\n  const [params, setParams] = useState<Params>({from: \"\", to: \"\"})\n\n  const [allStations, setAllStations] = useState<AllStations[]>([]);\n\n  const [schedule, setSchedule] = useState({});\n\n  const [currentDate, setCurrentDate] = useState<string>(today);\n\n  const [status, setStatus] = useState<Status>('idle');\n\n  const [showMap, setShowMap] = useState(false);\n\n  useLayoutEffect(() => {\n    axios.get(`http://127.0.0.1:3001/`)\n      .then((res) => setAllStations(res.data))\n      .catch(e => console.error(e))\n  }, [setAllStations]);\n\n  useEffect(() => {\n    const {from, to} = params;\n\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`)\n        .then((res) => {\n          setStatus('loaded');\n          setSchedule(res.data)\n        })\n        .catch((e) => {\n          setStatus('error');\n          console.error(e)\n        })\n    }\n  }, [params, currentDate, allStations])\n\n  return (\n    <div className=\"App\">\n      <Suspense fallback={<Loader />}>\n       <Title currentDate={currentDate} setCurrentDate={setCurrentDate}/>\n      </Suspense>\n      <button type=\"button\" onClick={() => setShowMap(!showMap)}>show map</button>\n      {!showMap && <Suspense fallback={<Loader />}>\n        <Finder\n          setParams={setParams}\n          allStations={allStations}\n        />\n      </Suspense>}\n      {showMap && <RailwayMap allStations={allStations} />}\n      {status === 'loading' && <Loader />}\n      {status === 'loaded' &&\n        <>\n          <Suspense fallback={<Loader />}>\n            <Schedule schedule={schedule} currentDate={currentDate} status={status}/>\n          </Suspense>\n          <footer style={{\n            position: 'relative',\n            left: 0,\n            bottom: 0,\n            width: '100%',\n          }}>\n            <p>{thnxToYandex}</p>\n          </footer>\n        </>\n      }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}