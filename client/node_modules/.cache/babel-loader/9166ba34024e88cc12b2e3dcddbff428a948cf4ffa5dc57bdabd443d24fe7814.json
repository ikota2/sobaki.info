{"ast":null,"code":"var _jsxFileName = \"/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport { QueryClient } from 'react-query';\nimport axios from \"axios\";\nimport RailwayMap from \"./features/RailwayMap/RailwayMap\";\nimport Loader from \"./components/Loader/Loader\";\nimport { key } from './constants/key';\nimport { thnxToYandex } from \"./constants/thnxToYandex\";\nimport { today } from \"./constants/dates\";\nimport { capitalize } from \"./helpers/capitalize\";\nimport { findYaCode } from \"./helpers/findYaCode\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Title = /*#__PURE__*/React.lazy(_c = () => import('./features/Title/Title'));\n_c2 = Title;\nconst Finder = /*#__PURE__*/React.lazy(_c3 = () => import('./features/Finder/Finder'));\n_c4 = Finder;\nconst Schedule = /*#__PURE__*/React.lazy(_c5 = () => import('./features/Schedule/Schedule'));\n_c6 = Schedule;\nconst queryClient = new QueryClient();\nfunction App() {\n  _s();\n  const [params, setParams] = useState({\n    from: \"\",\n    to: \"\"\n  });\n  const [allStations, setAllStations] = useState([]);\n  const [schedule, setSchedule] = useState({});\n  const [currentDate, setCurrentDate] = useState(today);\n  const [status, setStatus] = useState('idle');\n  const [showMap, setShowMap] = useState(false);\n  useLayoutEffect(() => {\n    axios.get(`http://127.0.0.1:3001/`).then(res => setAllStations(res.data)).catch(e => console.error(e));\n  }, [setAllStations]);\n  useEffect(() => {\n    const {\n      from,\n      to\n    } = params;\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`).then(res => {\n        setStatus('loaded');\n        setSchedule(res.data);\n      }).catch(e => {\n        setStatus('error');\n        console.error(e);\n      });\n    }\n  }, [params, currentDate, allStations]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 27\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Title, {\n        currentDate: currentDate,\n        setCurrentDate: setCurrentDate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: () => setShowMap(!showMap),\n      children: \"show map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), !showMap && /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 40\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Finder, {\n        setParams: setParams,\n        allStations: allStations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 20\n    }, this), showMap && /*#__PURE__*/_jsxDEV(RailwayMap, {\n      allStations: allStations\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }, this), status === 'loading' && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 32\n    }, this), status === 'loaded' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 31\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Schedule, {\n          schedule: schedule,\n          currentDate: currentDate,\n          status: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        style: {\n          position: 'relative',\n          left: 0,\n          bottom: 0,\n          width: '100%'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: thnxToYandex\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Ffy+/ES1gXDGxpwjhyoSygWB6tk=\");\n_c7 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Title$React.lazy\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"Finder$React.lazy\");\n$RefreshReg$(_c4, \"Finder\");\n$RefreshReg$(_c5, \"Schedule$React.lazy\");\n$RefreshReg$(_c6, \"Schedule\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useLayoutEffect","Suspense","QueryClient","axios","RailwayMap","Loader","key","thnxToYandex","today","capitalize","findYaCode","jsxDEV","_jsxDEV","Fragment","_Fragment","Title","lazy","_c","_c2","Finder","_c3","_c4","Schedule","_c5","_c6","queryClient","App","_s","params","setParams","from","to","allStations","setAllStations","schedule","setSchedule","currentDate","setCurrentDate","status","setStatus","showMap","setShowMap","get","then","res","data","catch","e","console","error","undefined","length","fromCode","toCode","className","children","fallback","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","style","position","left","bottom","width","_c7","$RefreshReg$"],"sources":["/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from 'react-query'\nimport axios from \"axios\";\n\nimport RailwayMap from \"./features/RailwayMap/RailwayMap\";\nimport Loader from \"./components/Loader/Loader\";\nimport {key} from './constants/key';\nimport {thnxToYandex} from \"./constants/thnxToYandex\";\nimport {today} from \"./constants/dates\";\nimport {capitalize} from \"./helpers/capitalize\";\nimport {findYaCode} from \"./helpers/findYaCode\";\nimport {AllStations, Params, Status} from \"./types\";\nimport './App.css';\n\nconst Title = React.lazy(() => import('./features/Title/Title'));\nconst Finder = React.lazy(() => import('./features/Finder/Finder'));\nconst Schedule = React.lazy(() => import('./features/Schedule/Schedule'));\n\nconst queryClient = new QueryClient()\n\nfunction App() {\n  const [params, setParams] = useState<Params>({from: \"\", to: \"\"})\n\n  const [allStations, setAllStations] = useState<AllStations[]>([]);\n\n  const [schedule, setSchedule] = useState({});\n\n  const [currentDate, setCurrentDate] = useState<string>(today);\n\n  const [status, setStatus] = useState<Status>('idle');\n\n  const [showMap, setShowMap] = useState(false);\n\n  useLayoutEffect(() => {\n    axios.get(`http://127.0.0.1:3001/`)\n      .then((res) => setAllStations(res.data))\n      .catch(e => console.error(e))\n  }, [setAllStations]);\n\n  useEffect(() => {\n    const {from, to} = params;\n\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`)\n        .then((res) => {\n          setStatus('loaded');\n          setSchedule(res.data)\n        })\n        .catch((e) => {\n          setStatus('error');\n          console.error(e)\n        })\n    }\n  }, [params, currentDate, allStations])\n\n  return (\n    <div className=\"App\">\n      <Suspense fallback={<Loader />}>\n       <Title currentDate={currentDate} setCurrentDate={setCurrentDate}/>\n      </Suspense>\n      <button type=\"button\" onClick={() => setShowMap(!showMap)}>show map</button>\n      {!showMap && <Suspense fallback={<Loader />}>\n        <Finder\n          setParams={setParams}\n          allStations={allStations}\n        />\n      </Suspense>}\n      {showMap && <RailwayMap allStations={allStations} />}\n      {status === 'loading' && <Loader />}\n      {status === 'loaded' &&\n        <>\n          <Suspense fallback={<Loader />}>\n            <Schedule schedule={schedule} currentDate={currentDate} status={status}/>\n          </Suspense>\n          <footer style={{\n            position: 'relative',\n            left: 0,\n            bottom: 0,\n            width: '100%',\n          }}>\n            <p>{thnxToYandex}</p>\n          </footer>\n        </>\n      }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}