{"ast":null,"code":"var _jsxFileName = \"/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx\",\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from 'react-query';\nimport axios from \"axios\";\nimport RailwayMap from \"./features/RailwayMap/RailwayMap\";\nimport Loader from \"./components/Loader/Loader\";\nimport { key } from './constants/key';\nimport { thnxToYandex } from \"./constants/thnxToYandex\";\nimport { today } from \"./constants/dates\";\nimport { capitalize } from \"./helpers/capitalize\";\nimport { findYaCode } from \"./helpers/findYaCode\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Title = /*#__PURE__*/React.lazy(_c = () => import('./features/Title/Title'));\n_c2 = Title;\nconst Finder = /*#__PURE__*/React.lazy(_c3 = () => import('./features/Finder/Finder'));\n_c4 = Finder;\nconst Schedule = /*#__PURE__*/React.lazy(_c5 = () => import('./features/Schedule/Schedule'));\n_c6 = Schedule;\nconst queryClient = new QueryClient();\nfunction App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [params, setParams] = useState({\n    from: \"\",\n    to: \"\"\n  });\n  const [allStations, setAllStations] = useState([]);\n  const [schedule, setSchedule] = useState({});\n  const [currentDate, setCurrentDate] = useState(today);\n  const [status, setStatus] = useState('idle');\n  const [showMap, setShowMap] = useState(false);\n\n  // useLayoutEffect(() => {\n  //   axios.get(`http://127.0.0.1:3001/`)\n  //     .then((res) => setAllStations(res.data))\n  //     .catch(e => console.error(e))\n  // }, [setAllStations]);\n\n  _s(useLayoutEffect(_s(() => {\n    _s();\n    const {\n      isLoading,\n      error,\n      data\n    } = useQuery('repoData', () => axios.get('https://api.github.com/repos/tannerlinsley/react-query').then(res => setAllStations(res.data)));\n  }, \"P7jBIA24rc00P7RvfXjpVl6dqRI=\", false, function () {\n    return [useQuery];\n  }), [setAllStations]), \"P7jBIA24rc00P7RvfXjpVl6dqRI=\", false, function () {\n    return [useQuery];\n  });\n  useEffect(() => {\n    const {\n      from,\n      to\n    } = params;\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`).then(res => {\n        setStatus('loaded');\n        setSchedule(res.data);\n      }).catch(e => {\n        setStatus('error');\n        console.error(e);\n      });\n    }\n  }, [params, currentDate, allStations]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(QueryClientProvider, {\n      client: queryClient,\n      children: [/*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Title, {\n          currentDate: currentDate,\n          setCurrentDate: setCurrentDate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setShowMap(!showMap),\n        children: \"show map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), !showMap && /*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 42\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(Finder, {\n          setParams: setParams,\n          allStations: allStations\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 22\n      }, this), showMap && /*#__PURE__*/_jsxDEV(RailwayMap, {\n        allStations: allStations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this), status === 'loading' && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 34\n      }, this), status === 'loaded' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Suspense, {\n          fallback: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 33\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Schedule, {\n            schedule: schedule,\n            currentDate: currentDate,\n            status: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n          style: {\n            position: 'relative',\n            left: 0,\n            bottom: 0,\n            width: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: thnxToYandex\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"Ffy+/ES1gXDGxpwjhyoSygWB6tk=\");\n_c7 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Title$React.lazy\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"Finder$React.lazy\");\n$RefreshReg$(_c4, \"Finder\");\n$RefreshReg$(_c5, \"Schedule$React.lazy\");\n$RefreshReg$(_c6, \"Schedule\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useLayoutEffect","Suspense","QueryClient","QueryClientProvider","useQuery","axios","RailwayMap","Loader","key","thnxToYandex","today","capitalize","findYaCode","jsxDEV","_jsxDEV","Fragment","_Fragment","Title","lazy","_c","_c2","Finder","_c3","_c4","Schedule","_c5","_c6","queryClient","App","_s2","_s","$RefreshSig$","params","setParams","from","to","allStations","setAllStations","schedule","setSchedule","currentDate","setCurrentDate","status","setStatus","showMap","setShowMap","isLoading","error","data","get","then","res","undefined","length","fromCode","toCode","catch","e","console","className","children","client","fallback","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","style","position","left","bottom","width","_c7","$RefreshReg$"],"sources":["/Users/alligator/Documents/education/projects/2022/sobaki/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState, useLayoutEffect, Suspense } from 'react';\nimport { QueryClient, QueryClientProvider, useQuery } from 'react-query'\nimport axios from \"axios\";\n\nimport RailwayMap from \"./features/RailwayMap/RailwayMap\";\nimport Loader from \"./components/Loader/Loader\";\nimport {key} from './constants/key';\nimport {thnxToYandex} from \"./constants/thnxToYandex\";\nimport {today} from \"./constants/dates\";\nimport {capitalize} from \"./helpers/capitalize\";\nimport {findYaCode} from \"./helpers/findYaCode\";\nimport {AllStations, Params, Status} from \"./types\";\nimport './App.css';\n\nconst Title = React.lazy(() => import('./features/Title/Title'));\nconst Finder = React.lazy(() => import('./features/Finder/Finder'));\nconst Schedule = React.lazy(() => import('./features/Schedule/Schedule'));\n\nconst queryClient = new QueryClient()\n\nfunction App() {\n  const [params, setParams] = useState<Params>({from: \"\", to: \"\"})\n\n  const [allStations, setAllStations] = useState<AllStations[]>([]);\n\n  const [schedule, setSchedule] = useState({});\n\n  const [currentDate, setCurrentDate] = useState<string>(today);\n\n  const [status, setStatus] = useState<Status>('idle');\n\n  const [showMap, setShowMap] = useState(false);\n\n  // useLayoutEffect(() => {\n  //   axios.get(`http://127.0.0.1:3001/`)\n  //     .then((res) => setAllStations(res.data))\n  //     .catch(e => console.error(e))\n  // }, [setAllStations]);\n\n  useLayoutEffect(() => {\n    const { isLoading, error, data } = useQuery('repoData', () =>\n      axios.get('https://api.github.com/repos/tannerlinsley/react-query').then(res =>\n        setAllStations(res.data)\n      )\n    )\n  }, [setAllStations])\n\n\n  useEffect(() => {\n    const {from, to} = params;\n\n    if (from !== undefined && to !== undefined && from.length > 0 && to.length > 0 && allStations.length > 0) {\n      const fromCode = findYaCode(capitalize(from), allStations);\n      const toCode = findYaCode(capitalize(to), allStations);\n      setStatus('loading');\n      axios.get(`/v3.0/search/?apikey=${key}&format=json&from=${fromCode}&to=${toCode}&lang=ru_RU&page=1&date=${currentDate}`)\n        .then((res) => {\n          setStatus('loaded');\n          setSchedule(res.data)\n        })\n        .catch((e) => {\n          setStatus('error');\n          console.error(e)\n        })\n    }\n  }, [params, currentDate, allStations])\n\n  return (\n    <div className=\"App\">\n      <QueryClientProvider client={queryClient}>\n        <Suspense fallback={<Loader />}>\n         <Title currentDate={currentDate} setCurrentDate={setCurrentDate}/>\n        </Suspense>\n        <button type=\"button\" onClick={() => setShowMap(!showMap)}>show map</button>\n        {!showMap && <Suspense fallback={<Loader />}>\n          <Finder\n            setParams={setParams}\n            allStations={allStations}\n          />\n        </Suspense>}\n        {showMap && <RailwayMap allStations={allStations} />}\n        {status === 'loading' && <Loader />}\n        {status === 'loaded' &&\n          <>\n            <Suspense fallback={<Loader />}>\n              <Schedule schedule={schedule} currentDate={currentDate} status={status}/>\n            </Suspense>\n            <footer style={{\n              position: 'relative',\n              left: 0,\n              bottom: 0,\n              width: '100%',\n            }}>\n              <p>{thnxToYandex}</p>\n            </footer>\n          </>\n        }\n      </QueryClientProvider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,eAAe,EAAEC,QAAQ,QAAQ,OAAO;AAC7E,SAASC,WAAW,EAAEC,mBAAmB,EAAEC,QAAQ,QAAQ,aAAa;AACxE,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAOC,UAAU,MAAM,kCAAkC;AACzD,OAAOC,MAAM,MAAM,4BAA4B;AAC/C,SAAQC,GAAG,QAAO,iBAAiB;AACnC,SAAQC,YAAY,QAAO,0BAA0B;AACrD,SAAQC,KAAK,QAAO,mBAAmB;AACvC,SAAQC,UAAU,QAAO,sBAAsB;AAC/C,SAAQC,UAAU,QAAO,sBAAsB;AAE/C,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEnB,MAAMC,KAAK,gBAAGpB,KAAK,CAACqB,IAAI,CAAAC,EAAA,GAACA,CAAA,KAAM,MAAM,CAAC,wBAAwB,CAAC,CAAC;AAACC,GAAA,GAA3DH,KAAK;AACX,MAAMI,MAAM,gBAAGxB,KAAK,CAACqB,IAAI,CAAAI,GAAA,GAACA,CAAA,KAAM,MAAM,CAAC,0BAA0B,CAAC,CAAC;AAACC,GAAA,GAA9DF,MAAM;AACZ,MAAMG,QAAQ,gBAAG3B,KAAK,CAACqB,IAAI,CAAAO,GAAA,GAACA,CAAA,KAAM,MAAM,CAAC,8BAA8B,CAAC,CAAC;AAACC,GAAA,GAApEF,QAAQ;AAEd,MAAMG,WAAW,GAAG,IAAIzB,WAAW,CAAC,CAAC;AAErC,SAAS0B,GAAGA,CAAA,EAAG;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EACb,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGlC,QAAQ,CAAS;IAACmC,IAAI,EAAE,EAAE;IAAEC,EAAE,EAAE;EAAE,CAAC,CAAC;EAEhE,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGtC,QAAQ,CAAgB,EAAE,CAAC;EAEjE,MAAM,CAACuC,QAAQ,EAAEC,WAAW,CAAC,GAAGxC,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE5C,MAAM,CAACyC,WAAW,EAAEC,cAAc,CAAC,GAAG1C,QAAQ,CAASW,KAAK,CAAC;EAE7D,MAAM,CAACgC,MAAM,EAAEC,SAAS,CAAC,GAAG5C,QAAQ,CAAS,MAAM,CAAC;EAEpD,MAAM,CAAC6C,OAAO,EAAEC,UAAU,CAAC,GAAG9C,QAAQ,CAAC,KAAK,CAAC;;EAE7C;EACA;EACA;EACA;EACA;;EAEA+B,EAAA,CAAA9B,eAAe,CAAA8B,EAAA,CAAC,MAAM;IAAAA,EAAA;IACpB,MAAM;MAAEgB,SAAS;MAAEC,KAAK;MAAEC;IAAK,CAAC,GAAG5C,QAAQ,CAAC,UAAU,EAAE,MACtDC,KAAK,CAAC4C,GAAG,CAAC,wDAAwD,CAAC,CAACC,IAAI,CAACC,GAAG,IAC1Ed,cAAc,CAACc,GAAG,CAACH,IAAI,CACzB,CACF,CAAC;EACH,CAAC;IAAA,QALoC5C,QAAQ;EAAA,IAK1C,CAACiC,cAAc,CAAC,CAAC;IAAA,QALiBjC,QAAQ;EAAA;EAQ7CN,SAAS,CAAC,MAAM;IACd,MAAM;MAACoC,IAAI;MAAEC;IAAE,CAAC,GAAGH,MAAM;IAEzB,IAAIE,IAAI,KAAKkB,SAAS,IAAIjB,EAAE,KAAKiB,SAAS,IAAIlB,IAAI,CAACmB,MAAM,GAAG,CAAC,IAAIlB,EAAE,CAACkB,MAAM,GAAG,CAAC,IAAIjB,WAAW,CAACiB,MAAM,GAAG,CAAC,EAAE;MACxG,MAAMC,QAAQ,GAAG1C,UAAU,CAACD,UAAU,CAACuB,IAAI,CAAC,EAAEE,WAAW,CAAC;MAC1D,MAAMmB,MAAM,GAAG3C,UAAU,CAACD,UAAU,CAACwB,EAAE,CAAC,EAAEC,WAAW,CAAC;MACtDO,SAAS,CAAC,SAAS,CAAC;MACpBtC,KAAK,CAAC4C,GAAG,CAAE,wBAAuBzC,GAAI,qBAAoB8C,QAAS,OAAMC,MAAO,2BAA0Bf,WAAY,EAAC,CAAC,CACrHU,IAAI,CAAEC,GAAG,IAAK;QACbR,SAAS,CAAC,QAAQ,CAAC;QACnBJ,WAAW,CAACY,GAAG,CAACH,IAAI,CAAC;MACvB,CAAC,CAAC,CACDQ,KAAK,CAAEC,CAAC,IAAK;QACZd,SAAS,CAAC,OAAO,CAAC;QAClBe,OAAO,CAACX,KAAK,CAACU,CAAC,CAAC;MAClB,CAAC,CAAC;IACN;EACF,CAAC,EAAE,CAACzB,MAAM,EAAEQ,WAAW,EAAEJ,WAAW,CAAC,CAAC;EAEtC,oBACEtB,OAAA;IAAK6C,SAAS,EAAC,KAAK;IAAAC,QAAA,eAClB9C,OAAA,CAACX,mBAAmB;MAAC0D,MAAM,EAAElC,WAAY;MAAAiC,QAAA,gBACvC9C,OAAA,CAACb,QAAQ;QAAC6D,QAAQ,eAAEhD,OAAA,CAACP,MAAM;UAAAwD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QAAAN,QAAA,eAC9B9C,OAAA,CAACG,KAAK;UAACuB,WAAW,EAAEA,WAAY;UAACC,cAAc,EAAEA;QAAe;UAAAsB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,eACXpD,OAAA;QAAQqD,IAAI,EAAC,QAAQ;QAACC,OAAO,EAAEA,CAAA,KAAMvB,UAAU,CAAC,CAACD,OAAO,CAAE;QAAAgB,QAAA,EAAC;MAAQ;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAC3E,CAACtB,OAAO,iBAAI9B,OAAA,CAACb,QAAQ;QAAC6D,QAAQ,eAAEhD,OAAA,CAACP,MAAM;UAAAwD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QAAAN,QAAA,eAC1C9C,OAAA,CAACO,MAAM;UACLY,SAAS,EAAEA,SAAU;UACrBG,WAAW,EAAEA;QAAY;UAAA2B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CAAC,EACVtB,OAAO,iBAAI9B,OAAA,CAACR,UAAU;QAAC8B,WAAW,EAAEA;MAAY;QAAA2B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACnDxB,MAAM,KAAK,SAAS,iBAAI5B,OAAA,CAACP,MAAM;QAAAwD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAClCxB,MAAM,KAAK,QAAQ,iBAClB5B,OAAA,CAAAE,SAAA;QAAA4C,QAAA,gBACE9C,OAAA,CAACb,QAAQ;UAAC6D,QAAQ,eAAEhD,OAAA,CAACP,MAAM;YAAAwD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAAAN,QAAA,eAC7B9C,OAAA,CAACU,QAAQ;YAACc,QAAQ,EAAEA,QAAS;YAACE,WAAW,EAAEA,WAAY;YAACE,MAAM,EAAEA;UAAO;YAAAqB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjE,CAAC,eACXpD,OAAA;UAAQuD,KAAK,EAAE;YACbC,QAAQ,EAAE,UAAU;YACpBC,IAAI,EAAE,CAAC;YACPC,MAAM,EAAE,CAAC;YACTC,KAAK,EAAE;UACT,CAAE;UAAAb,QAAA,eACA9C,OAAA;YAAA8C,QAAA,EAAInD;UAAY;YAAAsD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC;MAAA,eACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEc;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnB,CAAC;AAEV;AAACrC,GAAA,CAhFQD,GAAG;AAAA8C,GAAA,GAAH9C,GAAG;AAkFZ,eAAeA,GAAG;AAAC,IAAAT,EAAA,EAAAC,GAAA,EAAAE,GAAA,EAAAC,GAAA,EAAAE,GAAA,EAAAC,GAAA,EAAAgD,GAAA;AAAAC,YAAA,CAAAxD,EAAA;AAAAwD,YAAA,CAAAvD,GAAA;AAAAuD,YAAA,CAAArD,GAAA;AAAAqD,YAAA,CAAApD,GAAA;AAAAoD,YAAA,CAAAlD,GAAA;AAAAkD,YAAA,CAAAjD,GAAA;AAAAiD,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}